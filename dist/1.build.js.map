{"version":3,"sources":["webpack:///1.build.js","webpack:///./src/ProductList.vue","webpack:///./src/Utils.js?0130","webpack:///Product.vue","webpack:///ProductList.vue","webpack:///./src/ProductList.vue?463b","webpack:///./src/Product.vue?84c1","webpack:///./src/Product.vue","webpack:///./src/ProductList.vue?3fae","webpack:///./src/Product.vue?d380","webpack:///./src/ProductList.vue?4906","webpack:///./src/Product.vue?d658"],"names":["webpackJsonp","118","module","exports","__webpack_require__","injectStyle","ssrContext","Component","121","__webpack_exports__","getViewPortHeight","Math","max","document","documentElement","clientHeight","window","innerHeight","getScrollTop","pageYOffset","scrollTop","129","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__CartStorage_js__","__WEBPACK_IMPORTED_MODULE_1__EventBus_js__","props","data","focused","methods","emitFocusEvent","this","$emit","item","code","focus","unfocus","addToCart","addItem","name","130","__WEBPACK_IMPORTED_MODULE_0_lodash__","__WEBPACK_IMPORTED_MODULE_0_lodash___default","n","__WEBPACK_IMPORTED_MODULE_1__Product_vue__","__WEBPACK_IMPORTED_MODULE_1__Product_vue___default","__WEBPACK_IMPORTED_MODULE_2__Utils_js__","__WEBPACK_IMPORTED_MODULE_3__EventBus_js__","debug","productItems","loadingMoreData","lastScrollY","scrollEventHandler","scrollEvent","bind","components","product","a","loadMoreData","quantity","_this","dataRef","firebase","database","ref","console","log","query","orderByKey","length","endAt","last","limitToLast","on","snapshot","snapshotData","val","forInRight","v","k","push","assign","off","updateChildFocus","childCode","each","$children","child","e","st","boundingBox","$el","getBoundingClientRect","top","height","mounted","addEventListener","beforeDestroy","removeEventListener","142","i","143","151","162","render","_vm","_h","$createElement","_c","_self","staticClass","style","display","_v","_l","key","attrs","updatechildfocus","staticRenderFns","163","class","product-list-item-large ","click","src","image","to","params","_s","description","price","$event","172","content","locals","173"],"mappings":"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","file":"1.build.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 118:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(172)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(130),\n  /* template */\n  __webpack_require__(162),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 121:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    getViewPortHeight: function getViewPortHeight() {\n        return Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n    },\n    getScrollTop: function getScrollTop() {\n        return window.pageYOffset || document.documentElement.scrollTop;\n    }\n});\n\n/***/ }),\n\n/***/ 129:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__CartStorage_js__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__EventBus_js__ = __webpack_require__(8);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    props: [\"item\"],\n\n    data: function data() {\n        return {\n            focused: false\n        };\n    },\n\n\n    methods: {\n        emitFocusEvent: function emitFocusEvent() {\n            this.$emit('updatechildfocus', this.item.code);\n        },\n        focus: function focus() {\n            this.focused = true;\n        },\n        unfocus: function unfocus() {\n            this.focused = false;\n        },\n        addToCart: function addToCart() {\n            // Add item to storage\n            __WEBPACK_IMPORTED_MODULE_0__CartStorage_js__[\"a\" /* CartStorage */].addItem(this.item.code);\n\n            // Update counter\n            __WEBPACK_IMPORTED_MODULE_1__EventBus_js__[\"a\" /* EventBus */].$emit('update-counter');\n\n            // Push notification\n            __WEBPACK_IMPORTED_MODULE_1__EventBus_js__[\"a\" /* EventBus */].$emit('push-notification', this.item.name + \" has been added to cart.\");\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 130:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Product_vue__ = __webpack_require__(151);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Product_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__Product_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Utils_js__ = __webpack_require__(121);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__EventBus_js__ = __webpack_require__(8);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'ProductList',\n\n    data: function data() {\n        return {\n            debug: true,\n            productItems: [],\n            loadingMoreData: false,\n            lastScrollY: __WEBPACK_IMPORTED_MODULE_2__Utils_js__[\"a\" /* default */].getScrollTop(),\n            scrollEventHandler: this.scrollEvent.bind(this)\n        };\n    },\n\n\n    components: {\n        product: __WEBPACK_IMPORTED_MODULE_1__Product_vue___default.a\n    },\n\n    methods: {\n        loadMoreData: function loadMoreData(quantity) {\n            var _this = this;\n\n            // Debounce loading data\n            if (this.loadingMoreData) return;\n\n            var dataRef = firebase.database().ref(\"/Products\");\n\n            if (this.debug) console.log(\"Loading started\");\n            this.loadingMoreData = true;\n\n            var query = dataRef.orderByKey();\n\n            if (this.productItems.length) query = query.endAt(\"\" + (__WEBPACK_IMPORTED_MODULE_0_lodash___default.a.last(this.productItems).code - 1));\n\n            query.limitToLast(quantity).on(\"value\", function (snapshot) {\n                var snapshotData = snapshot.val();\n\n                __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.forInRight(snapshotData, function (v, k) {\n                    _this.productItems.push(__WEBPACK_IMPORTED_MODULE_0_lodash___default.a.assign(v, { code: k }));\n                });\n\n                _this.loadingMoreData = false;\n\n                dataRef.off(\"value\");\n\n                if (_this.debug) console.log(\"Loading completed\");\n            });\n        },\n        updateChildFocus: function updateChildFocus(childCode) {\n            __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.each(this.$children, function (child) {\n                if (child.item.code === childCode) child.focus();else child.unfocus();\n            });\n        },\n        scrollEvent: function scrollEvent(e) {\n            var st = __WEBPACK_IMPORTED_MODULE_2__Utils_js__[\"a\" /* default */].getScrollTop();\n            if (!this.loadingMoreData && st > this.lastScrollY) {\n                ;\n                var boundingBox = this.$el.getBoundingClientRect();\n                var boundingTop = boundingBox.top;\n                var boundingHeight = boundingBox.height;\n\n                // If the user scroll to bottom\n                if (boundingTop + boundingHeight <= __WEBPACK_IMPORTED_MODULE_2__Utils_js__[\"a\" /* default */].getViewPortHeight()) this.loadMoreData(10);\n            }\n            this.lastScrollY = st;\n        }\n    },\n\n    mounted: function mounted() {\n        __WEBPACK_IMPORTED_MODULE_3__EventBus_js__[\"a\" /* EventBus */].$emit('componentMounted');\n        this.loadMoreData(10);\n        window.addEventListener('scroll', this.scrollEventHandler);\n    },\n    beforeDestroy: function beforeDestroy() {\n        window.removeEventListener('scroll', this.scrollEventHandler);\n    }\n});\n\n/***/ }),\n\n/***/ 142:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(2)();\n// imports\n\n\n// module\nexports.push([module.i, \"@keyframes blinking{0%{color:#d3d3d3}to{color:gray}}.animated-loading-text{width:250px;font-size:24px;height:24px;text-align:center;position:fixed;top:calc(50vh - 12px);left:calc(50vw - .5 * 250px);animation-name:blinking;animation-duration:.5s;animation-iteration-count:infinite;animation-direction:alternate;display:none;z-index:99;text-shadow:0 0 16px #fff}.material-card{box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24)}.material-button{position:relative;padding:12px;cursor:pointer;border:none;outline:none;border-radius:1px;box-shadow:0 1px 4px rgba(0,0,0,.6);background-color:#009688;color:#fff;transition:background-color .3s;overflow:hidden;font-size:14px;text-align:center}.material-button:hover{background-color:#00897b}.material-button:before{content:\\\"\\\";position:absolute;top:50%;left:50%;display:block;width:0;padding-top:0;border-radius:100%;background-color:rgba(236,240,241,.2);transform:translate(-50%,-50%)}.material-button:active:before{width:120%;padding-top:120%;transition:width .2s ease-out,padding-top .2s ease-out}.product-list{min-height:100vh;display:flex;flex-direction:row;width:100%;justify-content:space-around;flex-wrap:wrap;align-items:center}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 143:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(2)();\n// imports\n\n\n// module\nexports.push([module.i, \".product-list-item{width:250px;height:117px;margin:32px;background:#fff;position:relative;transition-duration:.2s}.product-list-item-cover{width:100%;height:100%}.product-list-item-popup{width:100%;display:none;background:#fff;padding:16px;box-sizing:border-box}.product-list-item-popup a:hover,.product-list-item-popup a:link,.product-list-item-popup a:visited{text-decoration:none;color:gray}.product-list-item-popup-title{font-size:20px;width:100%;box-sizing:border-box;background:#fff}.product-list-item-popup-price{font-size:14px;font-weight:700;padding:8px}.product-list-item-popup-add-to-cart-button{width:100%;box-sizing:border-box;text-align:center}.product-list-item-popup-description{font-size:14px;width:100%;padding:10px;color:gray;background:#fff;box-sizing:border-box}.product-list-item-large{width:460px;height:fit-content;margin-left:calc(50% - 230px);margin-right:calc(50% - 230px)}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 151:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(173)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(129),\n  /* template */\n  __webpack_require__(163),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 162:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"product-list\"\n  }, [_c('div', {\n    staticClass: \"animated-loading-text\",\n    style: ({\n      display: _vm.loadingMoreData ? 'block' : 'none'\n    })\n  }, [_vm._v(\"\\n        Loading\\n    \")]), _vm._v(\" \"), _vm._l((_vm.productItems), function(item) {\n    return _c('product', {\n      key: item.code,\n      attrs: {\n        \"item\": item\n      },\n      on: {\n        \"updatechildfocus\": _vm.updateChildFocus\n      }\n    })\n  })], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 163:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    key: _vm.item.code,\n    staticClass: \"product-list-item material-card\",\n    class: {\n      'product-list-item-large ': _vm.focused\n    },\n    on: {\n      \"click\": _vm.emitFocusEvent\n    }\n  }, [_c('img', {\n    staticClass: \"product-list-item-cover\",\n    attrs: {\n      \"src\": _vm.item.image\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"product-list-item-popup\",\n    style: ({\n      display: _vm.focused ? 'block' : 'none'\n    })\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": {\n        name: 'app',\n        params: {\n          code: _vm.item.code\n        }\n      }\n    }\n  }, [_c('div', {\n    staticClass: \"product-list-item-popup-title\"\n  }, [_vm._v(\"\\n                \" + _vm._s(_vm.item.name) + \"  \\n                \"), _c('small', [_c('small', [_c('span', {\n    staticClass: \"fa fa-info-circle\"\n  }, [_vm._v(\"  Tap to view details\")])])])])]), _vm._v(\" \"), _c('p', {\n    staticClass: \"product-list-item-popup-description\"\n  }, [_vm._v(\"\\n            \" + _vm._s(_vm.item.description) + \"\\n        \")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"product-list-item-popup-price\"\n  }, [_vm._v(\"\\n            $\" + _vm._s(_vm.item.price) + \"\\n        \")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"product-list-item-popup-add-to-cart-button material-button\",\n    on: {\n      \"click\": function($event) {\n        _vm.addToCart(_vm.item)\n      }\n    }\n  }, [_c('span', {\n    staticClass: \"fa fa-cart-plus\"\n  }), _vm._v(\"  Add to cart\\n        \")])], 1)])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 172:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(142);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(3)(\"05be7d35\", content, true);\n\n/***/ }),\n\n/***/ 173:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(143);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(3)(\"15402677\", content, true);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 1.build.js","function injectStyle (ssrContext) {\n  require(\"!!vue-style-loader!css-loader!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c48f4ada\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?indentedSyntax!../node_modules/vue-loader/lib/selector?type=styles&index=0!./ProductList.vue\")\n}\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./ProductList.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c48f4ada\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./ProductList.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/ProductList.vue\n// module id = 118\n// module chunks = 1","export default {\n    getViewPortHeight () {\n        return Math.max(\n            document.documentElement.clientHeight, window.innerHeight || 0\n        );\n    },\n\n    getScrollTop () {\n        return window.pageYOffset || document.documentElement.scrollTop;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Utils.js","<template>\n    <div v-bind:key=\"item.code\"\n        v-on:click=\"emitFocusEvent\"\n        v-bind:class=\"{ 'product-list-item-large ': focused }\"\n        class=\"product-list-item material-card\">\n        <img v-bind:src=\"item.image\" class=\"product-list-item-cover\">\n        <div class=\"product-list-item-popup\" v-bind:style=\"{ display: focused ? 'block' : 'none' }\">\n            <router-link v-bind:to=\"{ name: 'app', params: { code: item.code }}\">\n                <div class=\"product-list-item-popup-title\">\n                    {{ item.name }} &nbsp;\n                    <small><small><span class=\"fa fa-info-circle\">&nbsp; Tap to view details</span></small></small>\n                </div>\n            </router-link>\n            <p class=\"product-list-item-popup-description\">\n                {{ item.description }}\n            </p>\n            <div class=\"product-list-item-popup-price\">\n                ${{ item.price }}\n            </div>\n            <div v-on:click=\"addToCart(item)\"\n                class=\"product-list-item-popup-add-to-cart-button material-button\">\n                <span class=\"fa fa-cart-plus\"></span>&nbsp; Add to cart\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { CartStorage } from './CartStorage.js'\nimport { EventBus } from './EventBus.js'\n\nexport default {\n    props: [\"item\"],\n\n    data () {\n        return {\n            focused: false\n        }\n    },\n\n    methods: {\n        \n        emitFocusEvent () {\n            this.$emit('updatechildfocus', this.item.code)\n        },\n\n        focus () {\n            this.focused = true\n        },\n        \n        unfocus () {\n            this.focused = false\n        },\n        \n        addToCart () {\n            // Add item to storage\n            CartStorage.addItem(this.item.code);\n\n            // Update counter\n            EventBus.$emit('update-counter')\n\n            // Push notification\n            EventBus.$emit('push-notification', this.item.name + \" has been added to cart.\");\n        }\n\n    }\n}\n</script>\n\n<style lang=\"sass\">\n.product-list \n    &-item\n        width: 250px\n        height: 117px\n        margin: 32px\n        background: white\n        position: relative\n        transition-duration: 0.2s\n\n        &-cover \n            width: 100%\n            height: 100%\n\n        &-popup\n            width: 100%\n            display: none\n            background: white\n            padding: 16px\n            box-sizing: border-box\n\n            a\n                &:hover, &:visited, &:link\n                    text-decoration: none\n                    color: gray\n\n            &-title\n                font-size: 20px\n                width: 100%\n                box-sizing: border-box\n                background: white\n\n            &-price \n                font-size: 14px\n                font-weight: bold\n                padding: 8px\n\n            &-add-to-cart-button\n                width: 100%\n                box-sizing: border-box\n                text-align: center\n\n            &-description\n                font-size: 14px\n                width: 100%\n                padding: 10px\n                color: gray\n                background: white\n                box-sizing: border-box\n\n    &-item-large\n        width: 460px\n        height: fit-content\n        margin-left: calc(50% - 230px)\n        margin-right: calc(50% - 230px)\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Product.vue?2c3cdd61","<template>\n    <div class=\"product-list\">\n        <div class=\"animated-loading-text\" \n            v-bind:style=\"{ display: loadingMoreData ? 'block' : 'none' }\">\n            Loading\n        </div>\n        <product\n            v-for=\"item in productItems\"\n            v-bind:item=\"item\"\n            v-bind:key=\"item.code\"\n            v-on:updatechildfocus=\"updateChildFocus\"\n        ></product>\n    </div>\n</template>\n\n<script>\nimport _ from 'lodash'\nimport Product from './Product.vue'\nimport Utils from './Utils.js'\nimport { EventBus } from './EventBus.js'\n\nexport default {\n    name: 'ProductList',\n\n    data () {\n        return {\n            debug: true,\n            productItems: [],\n            loadingMoreData: false,\n            lastScrollY: Utils.getScrollTop(),\n            scrollEventHandler: this.scrollEvent.bind(this)\n        }\n    },\n\n    components: {\n        product: Product\n    },\n\n    methods: {\n        loadMoreData (quantity) {\n            // Debounce loading data\n            if (this.loadingMoreData) return\n\n            var dataRef = firebase.database().ref(\"/Products\")\n\n            if (this.debug) console.log(\"Loading started\")\n            this.loadingMoreData = true\n\n            var query = dataRef.orderByKey()\n\n            if (this.productItems.length)\n                query = query.endAt(\"\" + (_.last(this.productItems).code - 1))\n\n            query.limitToLast(quantity)\n                 .on(\"value\", (snapshot) => {\n                    var snapshotData = snapshot.val()\n\n                    _.forInRight(snapshotData, (v, k) => {\n                        this.productItems.push(_.assign(v, { code: k }));\n                    })\n\n                    this.loadingMoreData = false\n\n                    dataRef.off(\"value\")\n\n                    if (this.debug) console.log(\"Loading completed\")\n                })\n        },\n\n        updateChildFocus (childCode) {\n            _.each(this.$children, (child) => {\n                if (child.item.code === childCode)\n                    child.focus()\n                else\n                    child.unfocus()\n            })\n        },\n\n        scrollEvent  (e) {\n            var st = Utils.getScrollTop();\n            if (!this.loadingMoreData && st > this.lastScrollY) {;\n                var boundingBox = this.$el.getBoundingClientRect();\n                var boundingTop = boundingBox.top;\n                var boundingHeight = boundingBox.height;\n\n                // If the user scroll to bottom\n                if (boundingTop + boundingHeight <= Utils.getViewPortHeight())\n                    this.loadMoreData(10);\n            }\n            this.lastScrollY = st;\n        }\n    },\n\n    mounted () {\n        EventBus.$emit('componentMounted')\n        this.loadMoreData(10)\n        window.addEventListener('scroll', this.scrollEventHandler)\n    },\n\n    beforeDestroy () {\n        window.removeEventListener('scroll', this.scrollEventHandler)\n    }\n}\n</script>\n\n<style lang=\"sass\">\n@import './assets/sass/components/animated-loading-text'\n@import './assets/sass/components/material-card'\n@import './assets/sass/components/material-button'\n\n.product-list \n    min-height: 100vh\n    display: flex\n    flex-direction: row\n    width: 100%\n    justify-content: space-around\n    flex-wrap: wrap\n    align-items: center\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// ProductList.vue?e9f7a3ca","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"@keyframes blinking{0%{color:#d3d3d3}to{color:gray}}.animated-loading-text{width:250px;font-size:24px;height:24px;text-align:center;position:fixed;top:calc(50vh - 12px);left:calc(50vw - .5 * 250px);animation-name:blinking;animation-duration:.5s;animation-iteration-count:infinite;animation-direction:alternate;display:none;z-index:99;text-shadow:0 0 16px #fff}.material-card{box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24)}.material-button{position:relative;padding:12px;cursor:pointer;border:none;outline:none;border-radius:1px;box-shadow:0 1px 4px rgba(0,0,0,.6);background-color:#009688;color:#fff;transition:background-color .3s;overflow:hidden;font-size:14px;text-align:center}.material-button:hover{background-color:#00897b}.material-button:before{content:\\\"\\\";position:absolute;top:50%;left:50%;display:block;width:0;padding-top:0;border-radius:100%;background-color:rgba(236,240,241,.2);transform:translate(-50%,-50%)}.material-button:active:before{width:120%;padding-top:120%;transition:width .2s ease-out,padding-top .2s ease-out}.product-list{min-height:100vh;display:flex;flex-direction:row;width:100%;justify-content:space-around;flex-wrap:wrap;align-items:center}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-c48f4ada\",\"scoped\":false,\"hasInlineConfig\":false}!./~/sass-loader/lib/loader.js?indentedSyntax!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/ProductList.vue\n// module id = 142\n// module chunks = 1","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".product-list-item{width:250px;height:117px;margin:32px;background:#fff;position:relative;transition-duration:.2s}.product-list-item-cover{width:100%;height:100%}.product-list-item-popup{width:100%;display:none;background:#fff;padding:16px;box-sizing:border-box}.product-list-item-popup a:hover,.product-list-item-popup a:link,.product-list-item-popup a:visited{text-decoration:none;color:gray}.product-list-item-popup-title{font-size:20px;width:100%;box-sizing:border-box;background:#fff}.product-list-item-popup-price{font-size:14px;font-weight:700;padding:8px}.product-list-item-popup-add-to-cart-button{width:100%;box-sizing:border-box;text-align:center}.product-list-item-popup-description{font-size:14px;width:100%;padding:10px;color:gray;background:#fff;box-sizing:border-box}.product-list-item-large{width:460px;height:fit-content;margin-left:calc(50% - 230px);margin-right:calc(50% - 230px)}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-f4f52956\",\"scoped\":false,\"hasInlineConfig\":false}!./~/sass-loader/lib/loader.js?indentedSyntax!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/Product.vue\n// module id = 143\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!vue-style-loader!css-loader!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f4f52956\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?indentedSyntax!../node_modules/vue-loader/lib/selector?type=styles&index=0!./Product.vue\")\n}\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./Product.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f4f52956\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./Product.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Product.vue\n// module id = 151\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"product-list\"\n  }, [_c('div', {\n    staticClass: \"animated-loading-text\",\n    style: ({\n      display: _vm.loadingMoreData ? 'block' : 'none'\n    })\n  }, [_vm._v(\"\\n        Loading\\n    \")]), _vm._v(\" \"), _vm._l((_vm.productItems), function(item) {\n    return _c('product', {\n      key: item.code,\n      attrs: {\n        \"item\": item\n      },\n      on: {\n        \"updatechildfocus\": _vm.updateChildFocus\n      }\n    })\n  })], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-c48f4ada\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/ProductList.vue\n// module id = 162\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    key: _vm.item.code,\n    staticClass: \"product-list-item material-card\",\n    class: {\n      'product-list-item-large ': _vm.focused\n    },\n    on: {\n      \"click\": _vm.emitFocusEvent\n    }\n  }, [_c('img', {\n    staticClass: \"product-list-item-cover\",\n    attrs: {\n      \"src\": _vm.item.image\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"product-list-item-popup\",\n    style: ({\n      display: _vm.focused ? 'block' : 'none'\n    })\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": {\n        name: 'app',\n        params: {\n          code: _vm.item.code\n        }\n      }\n    }\n  }, [_c('div', {\n    staticClass: \"product-list-item-popup-title\"\n  }, [_vm._v(\"\\n                \" + _vm._s(_vm.item.name) + \"  \\n                \"), _c('small', [_c('small', [_c('span', {\n    staticClass: \"fa fa-info-circle\"\n  }, [_vm._v(\"  Tap to view details\")])])])])]), _vm._v(\" \"), _c('p', {\n    staticClass: \"product-list-item-popup-description\"\n  }, [_vm._v(\"\\n            \" + _vm._s(_vm.item.description) + \"\\n        \")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"product-list-item-popup-price\"\n  }, [_vm._v(\"\\n            $\" + _vm._s(_vm.item.price) + \"\\n        \")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"product-list-item-popup-add-to-cart-button material-button\",\n    on: {\n      \"click\": function($event) {\n        _vm.addToCart(_vm.item)\n      }\n    }\n  }, [_c('span', {\n    staticClass: \"fa fa-cart-plus\"\n  }), _vm._v(\"  Add to cart\\n        \")])], 1)])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-f4f52956\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/Product.vue\n// module id = 163\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js!../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c48f4ada\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/sass-loader/lib/loader.js?indentedSyntax!../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./ProductList.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"05be7d35\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-c48f4ada\",\"scoped\":false,\"hasInlineConfig\":false}!./~/sass-loader/lib/loader.js?indentedSyntax!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/ProductList.vue\n// module id = 172\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js!../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f4f52956\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/sass-loader/lib/loader.js?indentedSyntax!../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Product.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"15402677\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-f4f52956\",\"scoped\":false,\"hasInlineConfig\":false}!./~/sass-loader/lib/loader.js?indentedSyntax!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/Product.vue\n// module id = 173\n// module chunks = 1"],"sourceRoot":""}