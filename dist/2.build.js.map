{"version":3,"sources":["webpack:///2.build.js","webpack:///./src/PurchasedList.vue","webpack:///./src/Profile.vue","webpack:///PurchasedList.vue","webpack:///./src/PurchasedList.vue?b435","webpack:///./src/PurchasedList.vue?b893","webpack:///./src/PurchasedList.vue?c0a9","webpack:///Profile.vue","webpack:///./src/Profile.vue?5071","webpack:///./src/Profile.vue?1ca0","webpack:///./src/Profile.vue?5cc9"],"names":["webpackJsonp","116","module","exports","__webpack_require__","injectStyle","ssrContext","Component","122","128","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__User_js__","data","purchasedItems","loadingItems","methods","hasLogin","hasItem","this","length","loadData","_this","purchased","getPurchases","getLogin","email","dataRef","firebase","database","ref","loadedCount","i","code","orderByKey","equalTo","toString","on","snapshot","val","item","push","mounted","131","137","render","_vm","_h","$createElement","_c","_self","staticClass","style","display","_v","_l","key","attrs","to","name","params","src","image","alt","_s","price","_e","staticRenderFns","141","content","locals","148","__WEBPACK_IMPORTED_MODULE_0__EventBus_js__","__WEBPACK_IMPORTED_MODULE_1__User_js__","__WEBPACK_IMPORTED_MODULE_2__PurchasedList_vue__","__WEBPACK_IMPORTED_MODULE_2__PurchasedList_vue___default","n","__WEBPACK_IMPORTED_MODULE_3_jdenticon__","__WEBPACK_IMPORTED_MODULE_3_jdenticon___default","__WEBPACK_IMPORTED_MODULE_4_blueimp_md5__","__WEBPACK_IMPORTED_MODULE_4_blueimp_md5___default","components","purchased-list","a","username","location","joinDate","getUserAvatar","toSvg","login","user","getUser","token","Date","toDateString","$emit","beforeCreate","$on","$forceUpdate","150","160","id","167"],"mappings":"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","file":"2.build.js","sourcesContent":["webpackJsonp([2,8],{\n\n/***/ 116:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(141)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(128),\n  /* template */\n  __webpack_require__(137),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 122:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(167)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(148),\n  /* template */\n  __webpack_require__(160),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 128:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__User_js__ = __webpack_require__(18);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    data: function data() {\n        return {\n            purchasedItems: [],\n            loadingItems: false\n        };\n    },\n\n\n    methods: {\n        hasLogin: function hasLogin() {\n            return __WEBPACK_IMPORTED_MODULE_0__User_js__[\"a\" /* default */].hasLogin();\n        },\n        hasItem: function hasItem() {\n            return this.purchasedItems.length != 0;\n        },\n\n\n        /**\n         * Load cart informations from server\n         */\n        loadData: function loadData() {\n            var _this = this;\n\n            if (this.loadingItems) return;\n\n            this.loadingItems = true;\n\n            var purchased = __WEBPACK_IMPORTED_MODULE_0__User_js__[\"a\" /* default */].getPurchases(__WEBPACK_IMPORTED_MODULE_0__User_js__[\"a\" /* default */].getLogin().email);\n            if (!purchased.length) {\n                this.loadingItems = false;\n                return;\n            }\n\n            var dataRef = firebase.database().ref(\"/Products\");\n            var loadedCount = 0;\n\n            // Load cart informations from server by codes\n\n            var _loop = function _loop() {\n                var code = purchased[i];\n                dataRef.orderByKey().equalTo(code.toString()).on(\"value\", function (snapshot) {\n                    loadedCount += 1;\n                    if (loadedCount === purchased.length) _this.loadingItems = false;\n                    if (snapshot.val()) {\n                        var item = snapshot.val()[code];\n                        item.code = code;\n                        _this.purchasedItems.push(item);\n                    }\n                });\n            };\n\n            for (var i = 0; i < purchased.length; ++i) {\n                _loop();\n            }\n        }\n    },\n\n    mounted: function mounted() {\n        this.loadData();\n    }\n});\n\n/***/ }),\n\n/***/ 131:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(2)();\n// imports\n\n\n// module\nexports.push([module.i, \"@keyframes blinking{0%{color:#d3d3d3}to{color:gray}}.animated-loading-text{width:250px;font-size:24px;height:24px;text-align:center;position:fixed;top:calc(50vh - 12px);left:calc(50vw - .5 * 250px);animation-name:blinking;animation-duration:.5s;animation-iteration-count:infinite;animation-direction:alternate;display:none;z-index:99;text-shadow:0 0 16px #fff}.material-button{position:relative;padding:12px;cursor:pointer;border:none;outline:none;border-radius:1px;box-shadow:0 1px 4px rgba(0,0,0,.6);background-color:#009688;color:#fff;transition:background-color .3s;overflow:hidden;font-size:14px;text-align:center}.material-button:hover{background-color:#00897b}.material-button:before{content:\\\"\\\";position:absolute;top:50%;left:50%;display:block;width:0;padding-top:0;border-radius:100%;background-color:rgba(236,240,241,.2);transform:translate(-50%,-50%)}.material-button:active:before{width:120%;padding-top:120%;transition:width .2s ease-out,padding-top .2s ease-out}.material-card{box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24)}.purchased-list{min-height:100vh}.purchased-list-item{height:48px;margin-top:16px;margin-bottom:16px}.purchased-list-item a,.purchased-list-item a:hover,.purchased-list-item a:link,.purchased-list-item a:visited{color:gray}.purchased-list-item-image{width:auto;height:100%;vertical-align:middle;display:inline-block}.purchased-list-item-name{margin:0;vertical-align:middle;font-weight:400;display:inline-block;font-size:16px;padding-left:16px}.purchased-list-item-price{vertical-align:middle;padding-right:16px;display:inline-block;font-weight:700}.purchased-list-item-remove-button{width:48px;font-size:32px;cursor:pointer;display:inline-block;vertical-align:middle;text-align:center}.purchased-list-item-wrapper-left{float:left;margin:0;height:100%}.purchased-list-item-wrapper-right{float:right;margin:0;height:100%}.purchased-list-checkout-button{width:200px;font-size:20px;margin-left:auto;margin-right:auto;display:block}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 137:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return (_vm.hasLogin()) ? _c('div', {\n    staticClass: \"purchased-list\"\n  }, [_c('div', {\n    staticClass: \"animated-loading-text\",\n    style: ({\n      display: _vm.loadingItems ? 'block' : 'none'\n    })\n  }, [_vm._v(\"\\n        Loading\\n    \")]), _vm._v(\" \"), (_vm.hasItem()) ? _c('div', _vm._l((_vm.purchasedItems), function(item) {\n    return _c('div', {\n      key: item.code,\n      staticClass: \"purchased-list-item material-card\"\n    }, [_c('router-link', {\n      attrs: {\n        \"to\": {\n          name: 'app',\n          params: {\n            code: item.code\n          }\n        }\n      }\n    }, [_c('div', {\n      staticClass: \"purchased-list-item-wrapper-left\"\n    }, [_c('img', {\n      staticClass: \"purchased-list-item-image\",\n      attrs: {\n        \"src\": item.image,\n        \"alt\": \"\"\n      }\n    }), _vm._v(\" \"), _c('h1', {\n      staticClass: \"purchased-list-item-name\"\n    }, [_vm._v(_vm._s(item.name))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"purchased-list-item-wrapper-right\"\n    }, [_c('p', {\n      staticClass: \"purchased-list-item-price\"\n    }, [_vm._v(\"$\" + _vm._s(item.price))])])])], 1)\n  })) : _c('div', [_vm._v(\"\\n        You haven't purchased any apps. \"), _c('router-link', {\n    attrs: {\n      \"to\": \"/\"\n    }\n  }, [_vm._v(\"Go shopping\")]), _vm._v(\" and add some!.\\n    \")], 1)]) : _vm._e()\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 141:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(131);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(3)(\"abbb09d6\", content, true);\n\n/***/ }),\n\n/***/ 148:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__EventBus_js__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__User_js__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__PurchasedList_vue__ = __webpack_require__(116);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__PurchasedList_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__PurchasedList_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_jdenticon__ = __webpack_require__(41);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_jdenticon___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_jdenticon__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_blueimp_md5__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_blueimp_md5___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_blueimp_md5__);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    components: {\n        'purchased-list': __WEBPACK_IMPORTED_MODULE_2__PurchasedList_vue___default.a\n    },\n\n    data: function data() {\n        return {\n            email: '',\n            username: '',\n            location: '',\n            joinDate: ''\n        };\n    },\n\n\n    methods: {\n        hasLogin: function hasLogin() {\n            return __WEBPACK_IMPORTED_MODULE_1__User_js__[\"a\" /* default */].hasLogin();\n        },\n        getUserAvatar: function getUserAvatar() {\n            return 'data:image/svg+xml,' + __WEBPACK_IMPORTED_MODULE_3_jdenticon___default.a.toSvg(__WEBPACK_IMPORTED_MODULE_4_blueimp_md5___default()(this.email), 256);\n        },\n        loadData: function loadData() {\n            var login = __WEBPACK_IMPORTED_MODULE_1__User_js__[\"a\" /* default */].getLogin();\n            var user = __WEBPACK_IMPORTED_MODULE_1__User_js__[\"a\" /* default */].getUser(login.email, login.token);\n            if (user) {\n                this.email = user.email;\n                this.username = user.username;\n                this.location = user.location;\n                this.joinDate = new Date(user.joinDate).toDateString();\n            }\n        }\n    },\n\n    mounted: function mounted() {\n        __WEBPACK_IMPORTED_MODULE_0__EventBus_js__[\"a\" /* EventBus */].$emit('componentMounted');\n        this.loadData();\n    },\n    beforeCreate: function beforeCreate() {\n        var _this = this;\n\n        __WEBPACK_IMPORTED_MODULE_0__EventBus_js__[\"a\" /* EventBus */].$emit('componentLoaded');\n        __WEBPACK_IMPORTED_MODULE_0__EventBus_js__[\"a\" /* EventBus */].$on('logout', function () {\n            return _this.$forceUpdate();\n        });\n    }\n});\n\n/***/ }),\n\n/***/ 150:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(2)();\n// imports\n\n\n// module\nexports.push([module.i, \".profile{width:100%;display:flex;flex-wrap:wrap}.profile-info{width:300px}.profile-info-avatar{width:256px;height:auto}.profile-apps{width:calc(100% - 300px);min-width:500px}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 160:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return (_vm.hasLogin()) ? _c('div', {\n    staticClass: \"profile\"\n  }, [_c('div', {\n    staticClass: \"profile-info\",\n    attrs: {\n      \"id\": \"profile\"\n    }\n  }, [_c('h2', [_vm._v(\"Profile\")]), _vm._v(\" \"), _c('img', {\n    staticClass: \"profile-info-avatar\",\n    attrs: {\n      \"src\": _vm.getUserAvatar()\n    }\n  }), _vm._v(\" \"), _c('h2', [_vm._v(_vm._s(_vm.username))]), _vm._v(\" \"), _c('h4', [_vm._v(\"Location: \" + _vm._s(_vm.location))]), _vm._v(\" \"), _c('h4', [_vm._v(\"Join date: \" + _vm._s(_vm.joinDate))])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"profile-apps\"\n  }, [_c('h2', [_vm._v(\"Purchased apps\")]), _vm._v(\" \"), _c('purchased-list')], 1)]) : _c('div', [_vm._v(\"\\n    Please \"), _c('router-link', {\n    attrs: {\n      \"to\": \"/login\"\n    }\n  }, [_vm._v(\"login\")]), _vm._v(\" to continue.\\n\")], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 167:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(150);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(3)(\"3acaa55a\", content, true);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 2.build.js","function injectStyle (ssrContext) {\n  require(\"!!vue-style-loader!css-loader!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-72ac79a7\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?indentedSyntax!../node_modules/vue-loader/lib/selector?type=styles&index=0!./PurchasedList.vue\")\n}\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./PurchasedList.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-72ac79a7\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./PurchasedList.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/PurchasedList.vue\n// module id = 116\n// module chunks = 2 8","function injectStyle (ssrContext) {\n  require(\"!!vue-style-loader!css-loader!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2df589e2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?indentedSyntax!../node_modules/vue-loader/lib/selector?type=styles&index=0!./Profile.vue\")\n}\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./Profile.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2df589e2\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./Profile.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Profile.vue\n// module id = 122\n// module chunks = 2","<template>\n    <div v-if=\"hasLogin()\" class=\"purchased-list\">\n        <div v-bind:style=\"{ display: loadingItems ? 'block' : 'none' }\"\n            class=\"animated-loading-text\">\n            Loading\n        </div>\n        <div v-if=\"hasItem()\">\n            <div v-for=\"item in purchasedItems\"\n                v-bind:key=\"item.code\"\n                class=\"purchased-list-item material-card\">\n                <router-link v-bind:to=\"{ name: 'app', params: { code: item.code }}\">\n                    <div class=\"purchased-list-item-wrapper-left\">\n                        <img v-bind:src=\"item.image\" alt=\"\" class=\"purchased-list-item-image\">\n                        <h1 class=\"purchased-list-item-name\">{{ item.name }}</h1>\n                    </div>\n                    <div class=\"purchased-list-item-wrapper-right\">\n                        <p class=\"purchased-list-item-price\">${{ item.price }}</p>\n                    </div>\n                </router-link>\n            </div>\n        </div>\n        <div v-else>\n            You haven't purchased any apps. <router-link to=\"/\">Go shopping</router-link> and add some!.\n        </div>\n    </div>  \n</template>\n\n<script>\nimport User from './User.js'\n\nexport default {\n    data () {\n        return {\n            purchasedItems: [],\n            loadingItems: false\n        }\n    },\n\n    methods: {\n        hasLogin () {\n            return User.hasLogin()\n        },\n\n        hasItem () {\n            return this.purchasedItems.length != 0\n        },\n\n        /**\n         * Load cart informations from server\n         */\n        loadData () {\n            if (this.loadingItems) \n                return\n\n            this.loadingItems = true\n            \n            var purchased = User.getPurchases(User.getLogin().email)\n            if (!purchased.length) {\n                this.loadingItems = false\n                return\n            }\n\n            var dataRef = firebase.database().ref(\"/Products\")\n            var loadedCount = 0\n\n            // Load cart informations from server by codes\n            for (var i = 0; i < purchased.length; ++i) {\n                let code = purchased[i]\n                dataRef.orderByKey()\n                    .equalTo(code.toString())\n                    .on(\"value\", (snapshot) => {\n                        loadedCount += 1\n                        if (loadedCount === purchased.length)\n                            this.loadingItems = false\n                        if (snapshot.val()) {\n                            var item = snapshot.val()[code]\n                            item.code = code\n                            this.purchasedItems.push(item)\n                        }\n                    })\n            }\n        },\n    },\n\n    mounted () {\n        this.loadData()\n    }\n}\n</script>\n\n<style lang=\"sass\">\n@import './assets/sass/components/animated-loading-text'\n@import './assets/sass/components/material-button'\n@import './assets/sass/components/material-card'\n\n.purchased-list \n    min-height: 100vh\n\n    &-item \n        height: 48px\n        margin-top: 16px\n        margin-bottom: 16px\n\n        a, a:hover, a:link, a:visited\n            color: gray\n\n        &-image \n            width: auto\n            height: 100%\n            vertical-align: middle\n            display: inline-block\n\n        &-name \n            margin: 0\n            vertical-align: middle\n            font-weight: normal\n            display: inline-block\n            font-size: 16px\n            padding-left: 16px\n        \n        &-price \n            vertical-align: middle\n            padding-right: 16px\n            display: inline-block\n            font-weight: bold\n\n        &-remove-button \n            width: 48px\n            font-size: 32px\n            cursor: pointer\n            display: inline-block\n            vertical-align: middle\n            text-align: center\n\n        &-wrapper-left \n            float: left\n            margin: 0\n            height: 100%\n\n        &-wrapper-right \n            float: right\n            margin: 0\n            height: 100%\n\n    &-checkout-button \n        width: 200px\n        font-size: 20px\n        margin-left: auto\n        margin-right: auto\n        display: block\n</style>\n\n\n\n// WEBPACK FOOTER //\n// PurchasedList.vue?06f31521","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"@keyframes blinking{0%{color:#d3d3d3}to{color:gray}}.animated-loading-text{width:250px;font-size:24px;height:24px;text-align:center;position:fixed;top:calc(50vh - 12px);left:calc(50vw - .5 * 250px);animation-name:blinking;animation-duration:.5s;animation-iteration-count:infinite;animation-direction:alternate;display:none;z-index:99;text-shadow:0 0 16px #fff}.material-button{position:relative;padding:12px;cursor:pointer;border:none;outline:none;border-radius:1px;box-shadow:0 1px 4px rgba(0,0,0,.6);background-color:#009688;color:#fff;transition:background-color .3s;overflow:hidden;font-size:14px;text-align:center}.material-button:hover{background-color:#00897b}.material-button:before{content:\\\"\\\";position:absolute;top:50%;left:50%;display:block;width:0;padding-top:0;border-radius:100%;background-color:rgba(236,240,241,.2);transform:translate(-50%,-50%)}.material-button:active:before{width:120%;padding-top:120%;transition:width .2s ease-out,padding-top .2s ease-out}.material-card{box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24)}.purchased-list{min-height:100vh}.purchased-list-item{height:48px;margin-top:16px;margin-bottom:16px}.purchased-list-item a,.purchased-list-item a:hover,.purchased-list-item a:link,.purchased-list-item a:visited{color:gray}.purchased-list-item-image{width:auto;height:100%;vertical-align:middle;display:inline-block}.purchased-list-item-name{margin:0;vertical-align:middle;font-weight:400;display:inline-block;font-size:16px;padding-left:16px}.purchased-list-item-price{vertical-align:middle;padding-right:16px;display:inline-block;font-weight:700}.purchased-list-item-remove-button{width:48px;font-size:32px;cursor:pointer;display:inline-block;vertical-align:middle;text-align:center}.purchased-list-item-wrapper-left{float:left;margin:0;height:100%}.purchased-list-item-wrapper-right{float:right;margin:0;height:100%}.purchased-list-checkout-button{width:200px;font-size:20px;margin-left:auto;margin-right:auto;display:block}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-72ac79a7\",\"scoped\":false,\"hasInlineConfig\":false}!./~/sass-loader/lib/loader.js?indentedSyntax!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/PurchasedList.vue\n// module id = 131\n// module chunks = 2 8","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return (_vm.hasLogin()) ? _c('div', {\n    staticClass: \"purchased-list\"\n  }, [_c('div', {\n    staticClass: \"animated-loading-text\",\n    style: ({\n      display: _vm.loadingItems ? 'block' : 'none'\n    })\n  }, [_vm._v(\"\\n        Loading\\n    \")]), _vm._v(\" \"), (_vm.hasItem()) ? _c('div', _vm._l((_vm.purchasedItems), function(item) {\n    return _c('div', {\n      key: item.code,\n      staticClass: \"purchased-list-item material-card\"\n    }, [_c('router-link', {\n      attrs: {\n        \"to\": {\n          name: 'app',\n          params: {\n            code: item.code\n          }\n        }\n      }\n    }, [_c('div', {\n      staticClass: \"purchased-list-item-wrapper-left\"\n    }, [_c('img', {\n      staticClass: \"purchased-list-item-image\",\n      attrs: {\n        \"src\": item.image,\n        \"alt\": \"\"\n      }\n    }), _vm._v(\" \"), _c('h1', {\n      staticClass: \"purchased-list-item-name\"\n    }, [_vm._v(_vm._s(item.name))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"purchased-list-item-wrapper-right\"\n    }, [_c('p', {\n      staticClass: \"purchased-list-item-price\"\n    }, [_vm._v(\"$\" + _vm._s(item.price))])])])], 1)\n  })) : _c('div', [_vm._v(\"\\n        You haven't purchased any apps. \"), _c('router-link', {\n    attrs: {\n      \"to\": \"/\"\n    }\n  }, [_vm._v(\"Go shopping\")]), _vm._v(\" and add some!.\\n    \")], 1)]) : _vm._e()\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-72ac79a7\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/PurchasedList.vue\n// module id = 137\n// module chunks = 2 8","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js!../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-72ac79a7\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/sass-loader/lib/loader.js?indentedSyntax!../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./PurchasedList.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"abbb09d6\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-72ac79a7\",\"scoped\":false,\"hasInlineConfig\":false}!./~/sass-loader/lib/loader.js?indentedSyntax!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/PurchasedList.vue\n// module id = 141\n// module chunks = 2 8","<template>\n    <div v-if=\"hasLogin()\" class=\"profile\">\n        <div class=\"profile-info\" id=\"profile\">\n            <h2>Profile</h2>\n            <img v-bind:src=\"getUserAvatar()\" class=\"profile-info-avatar\">\n            <h2>{{ username }}</h2>\n            <h4>Location: {{ location }}</h4>\n            <h4>Join date: {{ joinDate }}</h4>\n        </div>\n        <div class=\"profile-apps\">\n            <h2>Purchased apps</h2>\n            <purchased-list></purchased-list>\n        </div>\n    </div>\n    <div v-else>\n        Please <router-link to=\"/login\">login</router-link> to continue.\n    </div>\n</template>\n\n<script>\nimport { EventBus } from './EventBus.js'\nimport User from './User.js'\nimport PurchasedList from './PurchasedList.vue'\nimport jdenticon from 'jdenticon'\nimport md5 from 'blueimp-md5'\n\nexport default {\n    components: {\n        'purchased-list': PurchasedList\n    },\n\n    data () {\n        return {\n            email: '',\n            username: '',\n            location: '',\n            joinDate: ''\n        }\n    },\n\n    methods: {\n        hasLogin () {\n            return User.hasLogin();\n        },\n        getUserAvatar () {\n            return 'data:image/svg+xml,' + jdenticon.toSvg(md5(this.email), 256)\n        },\n        loadData () {\n            var login = User.getLogin()\n            var user = User.getUser(login.email, login.token)\n            if (user) {\n                this.email = user.email\n                this.username = user.username\n                this.location = user.location\n                this.joinDate = (new Date(user.joinDate)).toDateString()\n            }\n        }\n    },\n\n    mounted () {\n        EventBus.$emit('componentMounted')\n        this.loadData()\n    },\n\n    beforeCreate () {\n        EventBus.$emit('componentLoaded')\n        EventBus.$on('logout', () => this.$forceUpdate())\n    }\n}\n</script>\n\n<style lang=\"sass\">\n.profile\n    width: 100%\n    display: flex\n    flex-wrap: wrap\n\n    &-info\n        width: 300px\n\n        &-avatar\n            width: 256px\n            height: auto\n\n    &-apps\n        width: calc(100% - 300px)\n        min-width: 500px\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Profile.vue?1a510d20","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".profile{width:100%;display:flex;flex-wrap:wrap}.profile-info{width:300px}.profile-info-avatar{width:256px;height:auto}.profile-apps{width:calc(100% - 300px);min-width:500px}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-2df589e2\",\"scoped\":false,\"hasInlineConfig\":false}!./~/sass-loader/lib/loader.js?indentedSyntax!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/Profile.vue\n// module id = 150\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return (_vm.hasLogin()) ? _c('div', {\n    staticClass: \"profile\"\n  }, [_c('div', {\n    staticClass: \"profile-info\",\n    attrs: {\n      \"id\": \"profile\"\n    }\n  }, [_c('h2', [_vm._v(\"Profile\")]), _vm._v(\" \"), _c('img', {\n    staticClass: \"profile-info-avatar\",\n    attrs: {\n      \"src\": _vm.getUserAvatar()\n    }\n  }), _vm._v(\" \"), _c('h2', [_vm._v(_vm._s(_vm.username))]), _vm._v(\" \"), _c('h4', [_vm._v(\"Location: \" + _vm._s(_vm.location))]), _vm._v(\" \"), _c('h4', [_vm._v(\"Join date: \" + _vm._s(_vm.joinDate))])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"profile-apps\"\n  }, [_c('h2', [_vm._v(\"Purchased apps\")]), _vm._v(\" \"), _c('purchased-list')], 1)]) : _c('div', [_vm._v(\"\\n    Please \"), _c('router-link', {\n    attrs: {\n      \"to\": \"/login\"\n    }\n  }, [_vm._v(\"login\")]), _vm._v(\" to continue.\\n\")], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-2df589e2\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/Profile.vue\n// module id = 160\n// module chunks = 2","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js!../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2df589e2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/sass-loader/lib/loader.js?indentedSyntax!../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Profile.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"3acaa55a\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-2df589e2\",\"scoped\":false,\"hasInlineConfig\":false}!./~/sass-loader/lib/loader.js?indentedSyntax!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/Profile.vue\n// module id = 167\n// module chunks = 2"],"sourceRoot":""}